{"ast":null,"code":"import _defineProperty from\"/Users/umallem/Downloads/site2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/umallem/Downloads/site2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/umallem/Downloads/site2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/umallem/Downloads/site2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/umallem/Downloads/site2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{notification}from\"antd\";var initialValues={name:\"\",email:\"\",message:\"\"};export var useForm=function useForm(validate){var _useState=useState({values:_objectSpread({},initialValues),errors:_objectSpread({},initialValues)}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var values,errors,url,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();values=formState.values;errors=validate(values);setFormState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{errors:errors});});url=\"\";// Fill in your API URL here\n_context.prev=5;if(!Object.values(errors).every(function(error){return error===\"\";})){_context.next=11;break;}_context.next=9;return fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(values)});case 9:response=_context.sent;if(!response.ok){notification[\"error\"]({message:\"Error\",description:\"There was an error sending your message, please try again later.\"});}else{event.target.reset();setFormState(function(){return{values:_objectSpread({},initialValues),errors:_objectSpread({},initialValues)};});notification[\"success\"]({message:\"Success\",description:\"Your message has been sent!\"});}case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](5);notification[\"error\"]({message:\"Error\",description:\"Failed to submit form. Please try again later.\"});case 16:case\"end\":return _context.stop();}},_callee,null,[[5,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(event){event.persist();var _event$target=event.target,name=_event$target.name,value=_event$target.value;setFormState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{values:_objectSpread(_objectSpread({},prevState.values),{},_defineProperty({},name,value)),errors:_objectSpread(_objectSpread({},prevState.errors),{},_defineProperty({},name,\"\"))});});};return{handleChange:handleChange,handleSubmit:handleSubmit,values:formState.values,errors:formState.errors};};","map":{"version":3,"names":["useState","notification","initialValues","name","email","message","useForm","validate","_useState","values","_objectSpread","errors","_useState2","_slicedToArray","formState","setFormState","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","url","response","wrap","_callee$","_context","prev","next","preventDefault","prevState","Object","every","error","fetch","method","headers","body","JSON","stringify","sent","ok","description","target","reset","t0","stop","_x","apply","arguments","handleChange","persist","_event$target","value","_defineProperty"],"sources":["/Users/umallem/Downloads/site2/src/common/utils/useForm.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { notification } from \"antd\";\r\n\r\ninterface IValues {\r\n  name: string;\r\n  email: string;\r\n  message: string;\r\n}\r\n\r\nconst initialValues: IValues = {\r\n  name: \"\",\r\n  email: \"\",\r\n  message: \"\",\r\n};\r\n\r\nexport const useForm = (validate: { (values: IValues): IValues }) => {\r\n  const [formState, setFormState] = useState<{\r\n    values: IValues;\r\n    errors: IValues;\r\n  }>({\r\n    values: { ...initialValues },\r\n    errors: { ...initialValues },\r\n  });\r\n\r\n  const handleSubmit = async (event: React.ChangeEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    const values = formState.values;\r\n    const errors = validate(values);\r\n    setFormState((prevState) => ({ ...prevState, errors }));\r\n\r\n    const url = \"\"; // Fill in your API URL here\r\n\r\n    try {\r\n      if (Object.values(errors).every((error) => error === \"\")) {\r\n        const response = await fetch(url, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(values),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          notification[\"error\"]({\r\n            message: \"Error\",\r\n            description:\r\n              \"There was an error sending your message, please try again later.\",\r\n          });\r\n        } else {\r\n          event.target.reset();\r\n          setFormState(() => ({\r\n            values: { ...initialValues },\r\n            errors: { ...initialValues },\r\n          }));\r\n\r\n          notification[\"success\"]({\r\n            message: \"Success\",\r\n            description: \"Your message has been sent!\",\r\n          });\r\n        }\r\n      }\r\n    } catch (error) {\r\n      notification[\"error\"]({\r\n        message: \"Error\",\r\n        description: \"Failed to submit form. Please try again later.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleChange = (\r\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    event.persist();\r\n    const { name, value } = event.target;\r\n    setFormState((prevState) => ({\r\n      ...prevState,\r\n      values: {\r\n        ...prevState.values,\r\n        [name]: value,\r\n      },\r\n      errors: {\r\n        ...prevState.errors,\r\n        [name]: \"\",\r\n      },\r\n    }));\r\n  };\r\n\r\n  return {\r\n    handleChange,\r\n    handleSubmit,\r\n    values: formState.values,\r\n    errors: formState.errors,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}